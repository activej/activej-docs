<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ActiveJ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ActiveJ Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-176574648-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-176574648-1",{})</script><title data-react-helmet="true">ActiveJ Serializer | World&#x27;s fastest JVM serializer | ActiveJ</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://activej.io/img/preview.png"><meta data-react-helmet="true" name="twitter:image" content="https://activej.io/img/preview.png"><meta data-react-helmet="true" property="og:url" content="https://activej.io/serializer/examples"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ActiveJ Serializer | World&#x27;s fastest JVM serializer | ActiveJ"><meta data-react-helmet="true" name="description" content="ActiveJ Serializer is world&#x27;s fastest JVM serializer. It is streamlined and features powerful tools with intuitive DSL"><meta data-react-helmet="true" property="og:description" content="ActiveJ Serializer is world&#x27;s fastest JVM serializer. It is streamlined and features powerful tools with intuitive DSL"><meta data-react-helmet="true" name="keywords" content="serializer,java,java framework,java for beginners,object serialization,spring alternative,bytecode generator"><link data-react-helmet="true" rel="shortcut icon" href="/./img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://activej.io/serializer/examples"><link data-react-helmet="true" rel="alternate" href="https://activej.io/serializer/examples" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://activej.io/serializer/examples" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.cd595f84.css">
<link rel="preload" href="/assets/js/runtime~main.5dcfaa01.js" as="script">
<link rel="preload" href="/assets/js/main.a44b6cc2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/./img/logo.webp" alt="Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/./img/logo.webp" alt="Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">ActiveJ</b></a><a class="navbar__item navbar__link navbar__link--active" href="/overview">Docs</a><a class="navbar__item navbar__link" href="/tutorials/getting-started">Tutorials</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/activej/activej" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/overview">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Async I/O</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Boot</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">HTTP</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Inject</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Codegen</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Serializer</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/serializer">Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/serializer/examples">Examples</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Specializer</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">RPC</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">FS</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Misc</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Examples</h1></header><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>To run the examples, you need to clone ActiveJ from GitHub</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W shell"><pre tabindex="0" class="prism-code language-shell codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/activej/activej</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>And import it as a Maven project. Check out tag <strong>v5.0-beta2</strong>. Before running the examples, build the project.
These examples are located at <code>activej/examples/core/serializer</code></p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="simple-object-serialization"></a>Simple Object Serialization<a class="hash-link" href="#simple-object-serialization" title="Direct link to heading">#</a></h2><p>In order to create classes whose instances can be serialized/deserialized, you should use special annotations:</p><ul><li><a href="https://github.com/activej/activej/blob/v5.0-beta2/core-serializer/src/main/java/io/activej/serializer/annotations/Serialize.java" target="_blank">@Serialize</a> annotation with order number on property getter. Parameter `order` provides better compatibility in case classes are changed.</li><li><a href="https://github.com/activej/activej/blob/v5.0-beta2/core-serializer/src/main/java/io/activej/serializer/annotations/Deserialize.java" target="_blank">@Deserialize</a> annotation with property name (which should be the same name as the one in getter) in constructor.</li></ul><p>This is enough to create serializable POJOs, for example:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public static class Person {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Person(@Deserialize(&quot;age&quot;) int age,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Deserialize(&quot;name&quot;) String name) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.age = age;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.name = name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public final int age;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public final String name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private String surname;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public String getSurname() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return surname;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public void setSurname(String surname) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.surname = surname;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Now let&#x27;s do some serialization. We&#x27;ll create a <code>Person</code> instance, a byte array that stores the result of the serialization, and a <a href="https://github.com/activej/activej/blob/v5.0-beta2/core-serializer/src/main/java/io/activej/serializer/BinarySerializer.java" target="_blank">BinarySerializer</a> instance that represents a serializer that encodes and decodes <code>&lt;T&gt;</code> values to byte arrays (<code>&lt;Person&gt;</code> values in this case):</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">Person john = new Person(34, &quot;Jim&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">john.setSurname(&quot;Smith&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">byte[] buffer = new byte[200];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">BinarySerializer&lt;Person&gt; serializer = SerializerBuilder.create()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build(Person.class);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>That&#x27;s it, now we can serialize and deserialize our <code>Person</code> instance:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">serializer.encode(buffer, 0, john);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Person johnCopy = serializer.decode(buffer, 0);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Let&#x27;s make a simple test to check if everything works correctly:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(john.age + &quot; &quot; + johnCopy.age);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(john.name + &quot; &quot; + johnCopy.name);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(john.getSurname() + &quot; &quot; + johnCopy.getSurname());</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>After you run the example, you&#x27;ll receive the following output:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W bash"><pre tabindex="0" class="prism-code language-bash codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">34</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">34</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">Jim Jim</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Smith Smith</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Which means that the serialization and deserialization worked correctly.</p><p>You can explore full example sources on <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/serializer/src/main/java/SimpleObjectExample.java" target="_blank">GitHub</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="generics-and-interfaces"></a>Generics and Interfaces<a class="hash-link" href="#generics-and-interfaces" title="Direct link to heading">#</a></h2><p>ActiveJ Serializer can simply manage more complex objects. For example, let&#x27;s see how it works with interfaces and
generics.</p><p>First, create a simple <code>Skill</code> class:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public static class Skill&lt;K, V&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private final K key;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private final V value;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Skill(@Deserialize(&quot;key&quot;) K key,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Deserialize(&quot;value&quot;) V value) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.key = key;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.value = value;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public K getKey() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return key;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public V getValue() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return value;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Next, create a <code>Person</code> interface that has a single method returning a list of skills:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public interface Person&lt;K, V&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  List&lt;Skill&lt;K, V&gt;&gt; getSkills();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Finally create a <code>Developer</code> class that implements <code>Person</code> interface:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public static class Developer implements Person&lt;Integer, String&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private List&lt;Skill&lt;Integer, String&gt;&gt; list;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public List&lt;Skill&lt;Integer, String&gt;&gt; getSkills() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return list;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public void setSkills(List&lt;Skill&lt;Integer, String&gt;&gt; list) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.list = list;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Let&#x27;s proceed to the serialization. Similarly to the previous example, we&#x27;ll create an instance of the <code>Developer</code>, a
byte array to store the result of the serialization and an instance of <code>BinarySerializer&lt;Developer&gt;</code> serializer:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">Developer developer = new Developer();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">developer.setSkills(Arrays.asList(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    new Skill&lt;&gt;(1, &quot;Java&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    new Skill&lt;&gt;(2, &quot;ActiveJ&quot;)));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">byte[] buffer = new byte[200];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">BinarySerializer&lt;Developer&gt; serializer = SerializerBuilder.create()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build(Developer.class);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Now let&#x27;s serialize and deserialize our <code>Developer</code> instance:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">serializer.encode(buffer, 0, developer);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Developer developer2 = serializer.decode(buffer, 0);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Check if the serialization works correctly:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">for (int i = 0; i &lt; developer.getSkills().size(); i++) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  System.out.println(developer.getSkills().get(i).getKey() + &quot; - &quot; + developer.getSkills().get(i).getValue() +</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;, &quot; + developer2.getSkills().get(i).getKey() + &quot; - &quot; + developer2.getSkills().get(i).getValue());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>If you run the example, you&#x27;ll receive the following output:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W bash"><pre tabindex="0" class="prism-code language-bash codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">1</span><span class="token plain"> - Java, </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> - Java</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> - ActiveJ, </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> - ActiveJ</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Which means that the serialization worked correctly.</p><p>You can explore full example sources on <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/serializer/src/main/java/GenericsAndInterfacesExample.java" target="_blank">GitHub</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="path-based-serialization"></a>Path-based serialization<a class="hash-link" href="#path-based-serialization" title="Direct link to heading">#</a></h2><p>Sometimes you need to serialize a field that represents a generic type. Let&#x27;s say a <code>Map</code>. All you need to do is put a <code>@Serialize</code> annotation on that field.</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">@Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public Map&lt;Integer, String&gt;&gt; map;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>But what if you want a map to contain nullable values? You can use <a href="https://github.com/activej/activej/blob/v5.0-beta2/core-serializer/src/main/java/io/activej/serializer/annotations/SerializeNullable.java" target="_blank">@SerializeNullable</a> annotation.
However, if you simply put this annotation on a field, it would mean that a whole map can be nullable.</p><p>We should put the annotation directly on a <code>String</code>! Starting from ActiveJ v5.0-beta1 some serializer annotations are applicable to a type use.
So whenever you need to mark some type with additional serializer information, just put the annotation on a type:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">@Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public Map&lt;Integer, @SerializeNullable String&gt;&gt; map;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>In older versions of ActiveJ the only way to specify which type should be nullable, for example, was by using <code>path</code> option from the annotation.
To serialize a map with nullable values you would need to do something like this:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">@Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@SerializeNullable(path = 1)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public Map&lt;Integer, String&gt;&gt; map;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Each type parameter has its own index, starting from 0. So, <code>Integer</code> has an index 0 and <code>String</code> has an index 1.
In order to specify that String may be null we add <code>path = 1</code> to the annotation.</p><p>A <code>path</code> parameter is actually an array of ints, so you may specify a nullable type in a nested declaration.
You also may put multiple path-based annotations on a field (or getter).</p><p>Here is an example:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">@Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@SerializeNullable // refers to Map&lt;String, Map&lt;Integer, Float[]&gt;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@SerializeNullable(path = 1) // refers to Map&lt;Integer, Float[]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@SerializeNullable(path = 0) // refers to String</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@SerializeNullable(path = {1, 0}) // refers to Integer</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@SerializeNullable(path = {1, 1}) // refers to Float[]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@SerializeNullable(path = {1, 1, 0}) //refers to the Float elements of the array</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public Map&lt;String, Map&lt;Integer, Float[]&gt;&gt; complexMap;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Unfortunately, in some cases the older versions of Java may not properly resolve which type parameter the annotation annotates if a type is annotated.
In this case you may use a path-based approach if you run your application using the version of Java less than 12.</p></div></div><p>In this tutorial we will show you how to write serializers using either path approach or type use approach.</p><p>First, let&#x27;s take a look at a type use approach.</p><p>We will define a parameterized class <code>Nested</code>:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public static class Nested&lt;T1, T2&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public final T1 first;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public final T2 second;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Nested(@Deserialize(&quot;first&quot;) T1 first, @Deserialize(&quot;second&quot;) T2 second) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.first = first;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.second = second;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public String toString() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &quot;Nested{&quot; + first + &quot;, &quot; + second + &#x27;}&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Then we define a <code>Storage</code> class to be serialized:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public static class Storage {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public List&lt;@SerializeNullable Nested&lt;Integer, @SerializeNullable String&gt;&gt; listOfNested;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>A class has a single field which as a <code>List</code> of nullable <code>Nested</code>. In addition, a second type parameter of a <code>Nested</code> class (<code>String</code>) is itself nullable.</p><p>We create a serializer as follows:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">BinarySerializer&lt;Storage&gt; serializer = SerializerBuilder.create(definingClassLoader)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build(Storage.class);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>We then construct a <code>Storage</code> class and add nullable elements to the list. Once we run the example we should see the following output:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W"><pre tabindex="0" class="prism-code language-undefined codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">[Nested{1, abc}, null, Nested{5, null}]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[Nested{1, abc}, null, Nested{5, null}]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>This shows both an original <code>Storage</code> contents as well as deserialized one.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>A special care should be taken when annotating arrays.</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">@Foo String @Bar []</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Here, <code>@Foo</code> annotates <code>String</code> while <code>@Bar</code> annotates the whole array <code>String[]</code>.</p><p>This is in accordance with <a href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-9.html#jls-9.7.4" target="_blank" rel="noopener noreferrer">Java Language Specification</a></p></div></div><p>You can explore full example sources on <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/serializer/src/main/java/SerializeNoPathExample.java" target="_blank">GitHub</a></p><p>Now, let&#x27;s see a path based approach.</p><p>We will use the same <code>Nested</code> class. However we will annotate a field of <code>Storage</code> class using annotations with <code>path</code>:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public static class Storage {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @SerializeNullable(path = 0)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @SerializeNullable(path = {0, 1})</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public List&lt;Nested&lt;Integer, String&gt;&gt; listOfNested;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p><strong>When creating a serializer an annotation compatibility mode should be enabled:</strong></p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">BinarySerializer&lt;Storage&gt; serializer = SerializerBuilder.create(definingClassLoader)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withAnnotationCompatibilityMode() // Compatibility mode has to be enabled</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build(Storage.class);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>After running the <code>main</code> method we should see the same output as with type use approach.</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W bash"><pre tabindex="0" class="prism-code language-bash codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Nested</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">, abc</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, null, Nested</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">5</span><span class="token plain">, null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Nested</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">, abc</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, null, Nested</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">5</span><span class="token plain">, null</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>You can explore full example sources on <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/serializer/src/main/java/SerializePathExample.java" target="_blank">GitHub</a></p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>You may not mix both annotaion styles. If you want to use type use approach, then use it as is.
Just make sure that your version of Java may resolve annotations on types.</p><p>For a path based approach do not forget to enable annotation compatibility mode on a <code>SerializerBuilder</code>.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="fixed-size-and-nullable-fields-serialization"></a>Fixed Size and Nullable Fields Serialization<a class="hash-link" href="#fixed-size-and-nullable-fields-serialization" title="Direct link to heading">#</a></h2><p>ActiveJ Serializer has some <a href="https://github.com/activej/activej/blob/v5.0-beta2/core-serializer/src/main/java/io/activej/serializer/annotations" target="_blank">helper annotations</a>, for example:</p><ul><li><a href="https://github.com/activej/activej/blob/v5.0-beta2/core-serializer/src/main/java/io/activej/serializer/annotations/SerializeNullable.java" target="_blank">@SerializeNullable</a> on properties that can have null values. This annotation also has a special `path` parameter. It represent a path of the tree of the variable&#x27;s data types. It allows to indicate which of the &#x27;nodes&#x27; is nullable.</li></ul><p>As you can see, you can write several annotations for the different paths of the same data structure.</p><ul><li><a href="https://github.com/activej/activej/blob/v5.0-beta2/core-serializer/src/main/java/io/activej/serializer/annotations/SerializeFixedSize.java" target="_blank">@SerializeFixedSize</a> on properties that should have a fixed size after serialization</li></ul><p>Let&#x27;s create a simple example that illustrates how to use these annotations:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public static class Storage {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public @SerializeNullable String @SerializeFixedSize(3) [] strings;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public byte @SerializeFixedSize(4) [] bytes;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Now let&#x27;s serialize and deserialize an instance of the <code>Storage</code> similarly to the previous examples. We&#x27;ll create an instance of the <code>Storage</code>, a byte array to store the result of the serialization and an instance of <code>BinarySerializer&lt;Storage&gt;</code> serializer:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">Storage storage = new Storage();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">storage.strings = new String[]{&quot;abc&quot;, null, &quot;123&quot;, &quot;superfluous&quot;};</span></span><span class="token-line" style="color:#393A34"><span class="token plain">storage.bytes = new byte[]{1, 2, 3, 4, 5, 6};</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">byte[] buffer = new byte[200];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">BinarySerializer&lt;Storage&gt; serializer = SerializerBuilder.create()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build(Storage.class);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Finally, serialize and deserialize <strong>Storage</strong> instance:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">serializer.encode(buffer, 0, storage);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Storage limitedStorage = serializer.decode(buffer, 0);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Let&#x27;s see how serialization affected the <em>storage</em>:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(Arrays.toString(storage.strings) + &quot; -&gt; &quot; + Arrays.toString(limitedStorage.strings));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(Arrays.toString(storage.bytes) + &quot; -&gt; &quot; + Arrays.toString(limitedStorage.bytes));</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>If you run the example, you&#x27;ll see the following output:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W bash"><pre tabindex="0" class="prism-code language-bash codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">abc, null, </span><span class="token number" style="color:#36acaa">123</span><span class="token plain">, superfluous</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">abc, null, </span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>As you can see in the first line, <em>storage</em> differs from <em>limitedStorage</em>. This is because <code>@SerializeFixedSize</code>
annotation  was set at value <strong>3</strong> for the <em>strings</em> property. Thus, &quot;superfluous&quot; was removed from the array while serialization took place.</p><p>You can explore full example sources on <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/serializer/src/main/java/FixedSizeFieldsExample.java" target="_blank">GitHub</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="custom-serializer"></a>Custom serializer<a class="hash-link" href="#custom-serializer" title="Direct link to heading">#</a></h2><p>In this example, we will demonstrate how you can write a custom serializer for a <code>LocalDate</code> class. You can use this example
as a reference for writing serializers for other classes that you may need to serialize.</p><p>Let&#x27;s imagine we need to serialize a class that contains <code>LocalDate</code> field:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public static class LocalDateHolder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Serialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public final LocalDate date;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public LocalDateHolder(@Deserialize(&quot;date&quot;) LocalDate date) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.date = date;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public String toString() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &quot;LocalDateHolder{date=&quot; + date + &#x27;}&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>By default, ActiveJ Serializer does not know how to serialize a <code>LocalDate</code> class, so it would throw an exception if you
naively try to serialize it. We have to provide a custom serializer for a <code>LocalDate</code> class to serialize <code>LocalDateHolder</code>
class:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public static class SerializerDefLocalDate extends AbstractSerializerDef {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Class&lt;?&gt; getEncodeType() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return LocalDate.class;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Expression encoder(final StaticEncoders staticEncoders,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      final Expression buf,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      final Variable pos,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      final Expression localDate,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      final int version,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      final CompatibilityLevel compatibilityLevel) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return sequence(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        writeVarInt(buf, pos, call(localDate, &quot;getYear&quot;)),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        writeVarInt(buf, pos, call(localDate, &quot;getMonthValue&quot;)),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        writeVarInt(buf, pos, call(localDate, &quot;getDayOfMonth&quot;))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Expression decoder(final StaticDecoders staticDecoders,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      final Expression input,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      final int version,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      final CompatibilityLevel compatibilityLevel) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return staticCall(LocalDate.class, &quot;of&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        readVarInt(input),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        readVarInt(input),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        readVarInt(input)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>We extend <a href="https://github.com/activej/activej/blob/v5.0-beta2/core-serializer/src/main/java/io/activej/serializer/AbstractSerializerDef.java" target="_blank">AbstractSerializerDef</a>
class and implement methods:</p><ul><li><code>Class&lt;?&gt; getEncodeType()</code> - specify <code>LocalDate.class</code> as the type of data to be serialized</li><li><code>Expression encoder(...)</code> - here we instruct the serializer how to serialize a <code>LocalDate</code> instance. We actually need to
serialize 3 <code>int</code> values (<code>year</code>, <code>month</code>, and <code>dayOfMonth</code>) and write them to <a href="https://github.com/activej/activej/blob/v5.0-beta2/core-serializer/src/main/java/io/activej/serializer/BinaryOutput.java" target="_blank">BinaryOutput</a> Using Lisp-like <code>Expression</code> API we do just that.</li><li><code>Expression decoder(...)</code> - here we need to instruct the serializer how to deserialize raw bytes into a <code>LocalDate</code> instance.
The process is an inverse to encoding. First, we have to read 3 <code>int</code> values (<code>year</code>, <code>month</code>, and <code>dayOfMonth</code>) from <a href="https://github.com/activej/activej/blob/v5.0-beta2/core-serializer/src/main/java/io/activej/serializer/BinaryInput.java" target="_blank">BinaryInput</a>
Then we can create a new <code>LocalDate</code> instance by calling static factory method <code>static LocalDate of(int year, int month, int dayOfMonth)</code>
and passing previously deserialized <code>int</code> values. We once again use <code>Expression</code> API for this task.</li></ul><p>At last, we need to add our serializer of <code>LocalDate</code> to <a href="https://github.com/activej/activej/blob/v5.0-beta2/core-serializer/src/main/java/io/activej/serializer/SerializerBuilder.java" target="_blank">SerializerBuilder</a></p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">BinarySerializer&lt;LocalDateHolder&gt; serializer =</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    SerializerBuilder.create()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .with(LocalDate.class, ctx -&gt; new SerializerDefLocalDate())</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build(LocalDateHolder.class);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>If we run <code>LocalDateSerializerExample#main</code> method, we should see the following output:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W text"><pre tabindex="0" class="prism-code language-text codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">Serializing LocalDateHolder: LocalDateHolder{date=2021-03-17}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Byte array with serialized LocalDateHolder: [-27, 15, 3, 17]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Deserialized LocalDateHolder: LocalDateHolder{date=2021-03-17}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>You can explore full example sources on <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/serializer/src/main/java/LocalDateSerializerExample.java" target="_blank">GitHub</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/serializer"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/specializer"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#simple-object-serialization" class="table-of-contents__link">Simple Object Serialization</a></li><li><a href="#generics-and-interfaces" class="table-of-contents__link">Generics and Interfaces</a></li><li><a href="#path-based-serialization" class="table-of-contents__link">Path-based serialization</a></li><li><a href="#fixed-size-and-nullable-fields-serialization" class="table-of-contents__link">Fixed Size and Nullable Fields Serialization</a></li><li><a href="#custom-serializer" class="table-of-contents__link">Custom serializer</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 ActiveJ LLC. All Rights Reserved</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5dcfaa01.js"></script>
<script src="/assets/js/main.a44b6cc2.js"></script>
</body>
</html>