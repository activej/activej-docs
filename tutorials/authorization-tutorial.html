<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ActiveJ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ActiveJ Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-176574648-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-176574648-1",{})</script><title data-react-helmet="true">ActiveJ | Simple app with authorization and session management | ActiveJ</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://activej.io/tutorials/authorization-tutorial"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ActiveJ | Simple app with authorization and session management | ActiveJ"><meta data-react-helmet="true" name="description" content="Create a Java web application with authorization and session management in about 100 lines of code using ActiveJ platform."><meta data-react-helmet="true" property="og:description" content="Create a Java web application with authorization and session management in about 100 lines of code using ActiveJ platform."><meta data-react-helmet="true" name="keywords" content="java,for beginners,java framework,guide,tutorial,web application,async,spring,spring alternative,netty alternative,jetty alternative,authorization,server,client,servlet"><meta data-react-helmet="true" property="og:image" content="https://activej.io/img/preview.png"><meta data-react-helmet="true" name="twitter:image" content="https://activej.io/img/preview.png"><link data-react-helmet="true" rel="shortcut icon" href="/./img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://activej.io/tutorials/authorization-tutorial"><link data-react-helmet="true" rel="alternate" href="https://activej.io/tutorials/authorization-tutorial" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://activej.io/tutorials/authorization-tutorial" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d4c8d469.css">
<link rel="preload" href="/assets/js/runtime~main.2fefe9a0.js" as="script">
<link rel="preload" href="/assets/js/main.7d14b74f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/./img/favicon.png" alt="Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/./img/favicon.png" alt="Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">ActiveJ</b></a><a class="navbar__item navbar__link" href="/overview">Docs</a><a class="navbar__item navbar__link navbar__link--active" href="/tutorials/getting-started">Tutorials</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/activej/activej" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/tutorials/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/tutorials/template-engine-integration">Template Engine Integration</a></li><li class="menu__list-item"><a class="menu__link" href="/tutorials/http-decoder">HTTP Decoder</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/tutorials/authorization-tutorial">Authorization and Session Management</a></li><li class="menu__list-item"><a class="menu__link" href="/tutorials/getting-started-advanced">ActiveJ + Docker + AWS</a></li><li class="menu__list-item"><a class="menu__link" href="/tutorials/using-react">ActiveJ + React</a></li><li class="menu__list-item"><a class="menu__link" href="/tutorials/todo-list-tutorial">ActiveJ + React (Advanced)</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Authorization and Session Management</h1></header><p>In this example we will create a simple authorization app with <strong>login</strong>/<strong>sign up</strong> scenarios
and session management.</p><p>ActiveJ doesn&#x27;t include built-in authorization modules or solutions, as this process may significantly vary depending
on the project&#x27;s business logic. This example represents a simple &quot;best practice&quot; which you
can extend and modify depending on your needs. You can find full example sources on <a href="https://github.com/activej/activej/blob/v4.3/examples/tutorials/auth" target="_blank">GitHub</a></p><p>In the example we will consider only the <a href="#creating-launcher">server</a> which was created using ActiveJ <code>HttpServerLauncher</code> and
<code>AsyncServlet</code>. This approach allows to create an embedded application server in about 100 lines of code with no
additional XML configurations or third-party dependencies.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="creating-launcher"></a>Creating Launcher<a class="hash-link" href="#creating-launcher" title="Direct link to heading">#</a></h2><p>Let&#x27;s create an <code>AuthLauncher</code>, which is the main part of the application as it manages the application lifecycle, routing
and authorization processes. We will use ActiveJ <code>HttpServerLauncher</code> and extend it:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public final class AuthLauncher extends HttpServerLauncher {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public static final String SESSION_ID = &quot;SESSION_ID&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Provides</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  AuthService loginService() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new AuthServiceImpl();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Provides</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Executor executor() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return newSingleThreadExecutor();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Provides</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private StaticLoader staticLoader(Executor executor) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return StaticLoader.ofClassPath(executor, &quot;site/&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Provides</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  SessionStore&lt;String&gt; sessionStore() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return SessionStoreInMemory.&lt;String&gt;create()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withLifetime(Duration.ofDays(30));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Provides</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  AsyncServlet servlet(SessionStore&lt;String&gt; sessionStore,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Named(&quot;public&quot;) AsyncServlet publicServlet, @Named(&quot;private&quot;) AsyncServlet privateServlet) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return SessionServlet.create(sessionStore, SESSION_ID, publicServlet, privateServlet);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Let&#x27;s explore the provided objects in more detail:</p><ul><li><strong>AuthService</strong> - authorization and register logic</li><li><strong>Executor</strong> - needed for StaticLoader</li><li><strong><a href="https://github.com/activej/activej/blob/v4.3/core-http/src/main/java/io/activej/http/loader/StaticLoader.java" target="_blank">StaticLoader</a></strong> - loads static content from <code>/site</code> directory</li><li><strong><a href="https://github.com/activej/activej/blob/v4.3/core-http/src/main/java/io/activej/http/session/SessionStore.java" target="_blank">SessionStore</a></strong> - handy storage for information about sessions</li><li><strong><a href="https://github.com/activej/activej/blob/v4.3/core-http/src/main/java/io/activej/http/AsyncServlet.java" target="_blank">AsyncServlet</a></strong> <em>servlet</em> - the main servlet that combines public and private servlets (for authorized and unauthorized sessions). As you can see, due to DI, this servlet only requires two servlets without their own dependencies</li></ul><p>Now let&#x27;s provide the <strong>public</strong> and <strong>private</strong> servlets.</p><ul><li><code>AsyncServlet</code> <em>publicServlet</em> - manages unauthorized sessions:</li></ul><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">@Provides</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Named(&quot;public&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">AsyncServlet publicServlet(AuthService authService, SessionStore&lt;String&gt; store, StaticLoader staticLoader) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return RoutingServlet.create()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      //[START REGION_3]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      .map(&quot;/&quot;, request -&gt; HttpResponse.redirect302(&quot;/login&quot;))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      //[END REGION_3]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      .map(GET, &quot;/signup&quot;, StaticServlet.create(staticLoader, &quot;signup.html&quot;))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      .map(GET, &quot;/login&quot;, StaticServlet.create(staticLoader, &quot;login.html&quot;))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      //[START REGION_4]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      .map(POST, &quot;/login&quot;, loadBody()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          .serveFirstSuccessful(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              request -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                Map&lt;String, String&gt; params = request.getPostParameters();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                String username = params.get(&quot;username&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                String password = params.get(&quot;password&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (authService.authorize(username, password)) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                  String sessionId = UUID.randomUUID().toString();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                  store.save(sessionId, &quot;My object saved in session&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                  return HttpResponse.redirect302(&quot;/members&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                      .withCookie(HttpCookie.of(SESSION_ID, sessionId));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                return AsyncServlet.NEXT;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              StaticServlet.create(staticLoader, &quot;errorPage.html&quot;)))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      //[END REGION_4]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      .map(POST, &quot;/signup&quot;, loadBody()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          .serve(request -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Map&lt;String, String&gt; params = request.getPostParameters();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            String username = params.get(&quot;username&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            String password = params.get(&quot;password&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (username != null &amp;&amp; password != null) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              authService.register(username, password);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return HttpResponse.redirect302(&quot;/login&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          }));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Let&#x27;s take a closer look at how we set up routing for servlets. ActiveJ approach resembles Express. For example,
here&#x27;s the request to the homepage for unauthorized users:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">.map(&quot;/&quot;, request -&gt; HttpResponse.redirect302(&quot;/login&quot;))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Method <code>map(@Nullable HttpMethod method, String path, AsyncServlet servlet)</code> adds the route to the <a href="https://github.com/activej/activej/blob/v4.3/core-http/src/main/java/io/activej/http/RoutingServlet.java" target="_blank"><code>RoutingServlet</code></a></p><ul><li><code>method</code> (optional) is one of the HTTP methods (<code>GET</code>, <code>POST</code>, etc.)</li><li><code>path</code> is the path on the server</li><li><code>servlet</code> defines the logic of request processing. If you need to get some data from the <em>request</em> while processing you can use:<ul><li><code>request.getPathParameter(String key)</code>/<code>request.getQueryParameter(String key)</code> (<a href="/http/examples#request-parameters-example">see example of query parameter usage</a>)
to provide the key of the needed parameter and receive back a corresponding String</li><li><code>request.getPostParameters()</code> to get a Map of all request parameters</li></ul></li></ul><p><code>GET</code> requests with paths <strong>&quot;/login&quot;</strong> and <strong>&quot;/signup&quot;</strong> upload the needed HTML pages.
<code>POST</code> requests with paths <strong>&quot;/login&quot;</strong> and <strong>&quot;/signup&quot;</strong> take care of log in and sign up logic respectively:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">.map(POST, &quot;/login&quot;, loadBody()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    .serveFirstSuccessful(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        request -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          Map&lt;String, String&gt; params = request.getPostParameters();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          String username = params.get(&quot;username&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          String password = params.get(&quot;password&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          if (authService.authorize(username, password)) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            String sessionId = UUID.randomUUID().toString();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            store.save(sessionId, &quot;My object saved in session&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return HttpResponse.redirect302(&quot;/members&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .withCookie(HttpCookie.of(SESSION_ID, sessionId));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          return AsyncServlet.NEXT;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        StaticServlet.create(staticLoader, &quot;errorPage.html&quot;)))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Pay attention at <code>POST</code> <strong>&quot;/login&quot;</strong> route. <em>serveFirstSuccessful()</em> takes two servlets and waits until one of them
finishes processing successfully. So if authorization fails, a Promise of <strong>null</strong> will be returned (<strong>AsyncServlet.NEXT</strong>),
which means fail. In this case, a simple <code>StaticServlet</code> will be created to load the <em>errorPage</em>.
Successful log in will generate a session <em>id</em> for the user and will save string <code>&quot;My saved object in session&quot;</code> to session store.
Also it will redirect user to <strong>&quot;/members&quot;</strong>.</p><p>Now, let&#x27;s get to the next servlet that handles authorized sessions.</p><ul><li><code>AsyncServlet</code> <em>privateServlet</em> - manages authorized sessions:</li></ul><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">@Provides</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Named(&quot;private&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">AsyncServlet privateServlet(StaticLoader staticLoader) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return RoutingServlet.create()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      //[START REGION_6]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      .map(&quot;/&quot;, request -&gt; HttpResponse.redirect302(&quot;/members&quot;))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      //[END REGION_6]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      //[START REGION_7]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      .map(&quot;/members/*&quot;, RoutingServlet.create()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          .map(GET, &quot;/&quot;, StaticServlet.create(staticLoader, &quot;index.html&quot;))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          //[START REGION_8]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          .map(GET, &quot;/cookie&quot;, request -&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              HttpResponse.ok200().withBody(wrapUtf8(request.getAttachment(String.class))))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          //[END REGION_8]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          .map(POST, &quot;/logout&quot;, request -&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              HttpResponse.redirect302(&quot;/&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                  .withCookie(HttpCookie.of(SESSION_ID).withPath(&quot;/&quot;).withMaxAge(Duration.ZERO))));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  //[END REGION_7]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>First, it redirects requests from homepage to <strong>&quot;/members&quot;</strong>:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">.map(&quot;/&quot;, request -&gt; HttpResponse.redirect302(&quot;/members&quot;))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Next, it takes care of all of the requests that go after <strong>&quot;/members&quot;</strong> path:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">.map(&quot;/members/*&quot;, RoutingServlet.create()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    .map(GET, &quot;/&quot;, StaticServlet.create(staticLoader, &quot;index.html&quot;))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    //[START REGION_8]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    .map(GET, &quot;/cookie&quot;, request -&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpResponse.ok200().withBody(wrapUtf8(request.getAttachment(String.class))))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    //[END REGION_8]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    .map(POST, &quot;/logout&quot;, request -&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpResponse.redirect302(&quot;/&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withCookie(HttpCookie.of(SESSION_ID).withPath(&quot;/&quot;).withMaxAge(Duration.ZERO))));</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>Pay attention to the path <strong>&quot;/members/*&quot;</strong>.
<code>*</code> is a variable for the next part of the path. It states that this servlet will process any path segment that goes after <strong>&quot;/members/&quot;</strong>.
For example, this route:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">.map(GET, &quot;/cookie&quot;, request -&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpResponse.ok200().withBody(wrapUtf8(request.getAttachment(String.class))))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><p>is a GET request for <strong>&quot;/members/cookie&quot;</strong> path. This request shows all cookies stored in the session.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>A request can have an attachment map where any content can be mapped to some type, i.e. String. By default, requests have no attachments. In this case, the request contains &#x27;cookies&#x27; as an attachment that&#x27;s mapped to the <code>String</code> type.</p></div></div><p><strong>&quot;/members/logout&quot;</strong> logs the user out, deletes all cookies related to this session and redirects the user to the homepage.</p><p>After <strong>public</strong> and <strong>private</strong> servlets are set up, we define <code>main()</code> method, which will start our launcher:</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public static void main(String[] args) throws Exception {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  AuthLauncher launcher = new AuthLauncher();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  launcher.launch(args);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="running-the-application"></a>Running the application<a class="hash-link" href="#running-the-application" title="Direct link to heading">#</a></h2><p>If you want to run the example, <a href="https://github.com/activej/activej" target="_blank" rel="noopener noreferrer">clone ActiveJ</a> and import it
as a Maven project. Check out branch <strong>v4.3</strong>. Before running the example, build the project (<strong>Ctrl + F9</strong> for IntelliJ IDEA).</p><p>Open <code>AuthLauncher</code> class and run its <em>main()</em> method.
Then open your favorite browser and go to <a href="http://localhost:8080" target="_blank" rel="noopener noreferrer">localhost:8080</a>. Try to sign up and then log in. When
logged in, check out your saved cookies for session. You will see the following content: <code>My saved object in session</code>.
Finally, try to log out. You can also try to log in with an invalid login or password.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/tutorials/http-decoder"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« HTTP Decoder</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/tutorials/getting-started-advanced"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ActiveJ + Docker + AWS Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creating-launcher" class="table-of-contents__link">Creating Launcher</a></li><li><a href="#running-the-application" class="table-of-contents__link">Running the application</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 ActiveJ LLC. All Rights Reserved</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2fefe9a0.js"></script>
<script src="/assets/js/main.7d14b74f.js"></script>
</body>
</html>