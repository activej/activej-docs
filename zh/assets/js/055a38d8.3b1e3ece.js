(self.webpackChunkactivejdocs=self.webpackChunkactivejdocs||[]).push([[8752],{77618:function(e,a,n){"use strict";var t=n(67294),i=n(39962);a.Z=function(e){var a=e.url,n=e.text,r=e.isInline,l=void 0===r||r,o=e.children,s=(0,i.Z)().siteConfig,m=a.startsWith("/examples")?s.customFields.githubExamplesBranch:s.customFields.githubBranch;return t.createElement("a",{style:l?{}:{display:"block",marginBottom:"16px"},href:s.customFields.githubUrl+"/"+m+a,target:"_blank"},n||o)}},14304:function(e,a,n){"use strict";var t=n(67294),i=n(21140),r=n.n(i);r().initialize({startOnLoad:!0});a.Z=function(e){var a=e.chart;return(0,t.useEffect)((function(){r().contentLoaded()}),[]),t.createElement("div",{className:"mermaid"},a)}},77815:function(e,a,n){"use strict";n(67294);var t=n(39962);a.Z=function(e){var a=e.name,n=(0,t.Z)().siteConfig;if(!a)throw new Error("Variable name is required");if(void 0===n.customFields[a])throw new Error("Variable "+a+" not exist");return n.customFields[a]}},9101:function(e,a,n){"use strict";n.r(a),n.d(a,{frontMatter:function(){return p},contentTitle:function(){return u},metadata:function(){return c},toc:function(){return d},default:function(){return N}});var t=n(87462),i=n(63366),r=(n(67294),n(3905)),l=n(14304),o=n(77618),s=n(77815),m=["components"],p={title:"ActiveJ | Promise, Java Promise\u7528\u4e8e\u5f02\u6b65\u7f16\u7a0b\u6a21\u578b\uff0c\u66ff\u4ee3Java Futures",description:"\u53d7Node.js\u542f\u53d1\u7684Promise\u7528\u4e8e\u5f02\u6b65Java\u7f16\u7a0b\u3002 Java\u671f\u8d27\u7684\u66ff\u4ee3\u54c1--\u6709\u65b9\u4fbf\u7684API\uff0c\u901f\u5ea6\u5feb7\u500d",sidebar_label:"\u627f\u8bfa",keywords:["\u627f\u8bfa","nodejs","node js","java","\u5f02\u6b65\u7f16\u7a0b","\u975e\u540c\u6b65\u7684","JAVA\u6846\u67b6","java \u671f\u8d27","\u53ef\u5b8c\u6210\u7684\u672a\u6765","\u5b8c\u6210\u9636\u6bb5","java\u627f\u8bfa"]},u="\u627f\u8bfa",c={unversionedId:"async-io/promise",id:"async-io/promise",isDocsHomePage:!1,title:"ActiveJ | Promise, Java Promise\u7528\u4e8e\u5f02\u6b65\u7f16\u7a0b\u6a21\u578b\uff0c\u66ff\u4ee3Java Futures",description:"\u53d7Node.js\u542f\u53d1\u7684Promise\u7528\u4e8e\u5f02\u6b65Java\u7f16\u7a0b\u3002 Java\u671f\u8d27\u7684\u66ff\u4ee3\u54c1--\u6709\u65b9\u4fbf\u7684API\uff0c\u901f\u5ea6\u5feb7\u500d",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/async-io/promise.mdx",sourceDirName:"async-io",slug:"/async-io/promise",permalink:"/zh/async-io/promise",tags:[],version:"current",frontMatter:{title:"ActiveJ | Promise, Java Promise\u7528\u4e8e\u5f02\u6b65\u7f16\u7a0b\u6a21\u578b\uff0c\u66ff\u4ee3Java Futures",description:"\u53d7Node.js\u542f\u53d1\u7684Promise\u7528\u4e8e\u5f02\u6b65Java\u7f16\u7a0b\u3002 Java\u671f\u8d27\u7684\u66ff\u4ee3\u54c1--\u6709\u65b9\u4fbf\u7684API\uff0c\u901f\u5ea6\u5feb7\u500d",sidebar_label:"\u627f\u8bfa",keywords:["\u627f\u8bfa","nodejs","node js","java","\u5f02\u6b65\u7f16\u7a0b","\u975e\u540c\u6b65\u7684","JAVA\u6846\u67b6","java \u671f\u8d27","\u53ef\u5b8c\u6210\u7684\u672a\u6765","\u5b8c\u6210\u9636\u6bb5","java\u627f\u8bfa"]},sidebar:"docs",previous:{title:"\u4e8b\u4ef6\u94fe\u63a5",permalink:"/zh/async-io/eventloop"},next:{title:"CSP",permalink:"/zh/async-io/csp"}},d=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",children:[]},{value:"\u7279\u70b9",id:"\u7279\u70b9",children:[{value:"\u521b\u9020\u8bfa\u8a00",id:"\u521b\u9020\u8bfa\u8a00",children:[]},{value:"\u94fe\u5f0f\u627f\u8bfa",id:"\u94fe\u5f0f\u627f\u8bfa",children:[]},{value:"\u5408\u5e76\u627f\u8bfa",id:"\u5408\u5e76\u627f\u8bfa",children:[]}]},{value:"\u4f18\u5316\u529f\u80fd",id:"\u4f18\u5316\u529f\u80fd",children:[]},{value:"\u57fa\u51c6",id:"\u57fa\u51c6",children:[]},{value:"\u5b9e\u4f8b",id:"\u5b9e\u4f8b",children:[{value:"\u627f\u8bfa\u94fe\u793a\u4f8b",id:"\u627f\u8bfa\u94fe\u793a\u4f8b",children:[]},{value:"\u627f\u8bfa\u9ad8\u7ea7\u793a\u4f8b",id:"\u627f\u8bfa\u9ad8\u7ea7\u793a\u4f8b",children:[]},{value:"\u627f\u8bfa\u5b9e\u4f8b",id:"\u627f\u8bfa\u5b9e\u4f8b",children:[]},{value:"\u5f02\u6b65\u6587\u4ef6\u670d\u52a1\u793a\u4f8b",id:"\u5f02\u6b65\u6587\u4ef6\u670d\u52a1\u793a\u4f8b",children:[]}]}],k={toc:d};function N(e){var a=e.components,n=(0,i.Z)(e,m);return(0,r.kt)("wrapper",(0,t.Z)({},k,n,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"\u627f\u8bfa"},"\u627f\u8bfa"),(0,r.kt)("h2",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),(0,r.kt)("p",null,"\u8bb8\u8bfa\u662fActiveJ\u5f02\u6b65\u7f16\u7a0b\u6a21\u578b\u7684\u4e3b\u8981\u6784\u4ef6\uff0c\u53ef\u4ee5\u4e0eJava Futures\u76f8\u6bd4\u8f83\u3002 ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise")," \u4ee3\u8868\u4e00\u4e2a\u5c1a\u672a\u5b8c\u6210\u7684\u64cd\u4f5c\u7684\u7ed3\u679c\u3002"),(0,r.kt)("h2",{id:"\u7279\u70b9"},"\u7279\u70b9"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e0eJava Futures\u4e0d\u540c\uff0c ",(0,r.kt)("strong",{parentName:"li"},"Promises")," \uff0c\u88ab\u8bbe\u8ba1\u4e3a\u5728\u4e00\u4e2a\u5355\u4e00\u7684\u4e8b\u4ef6\u5faa\u73af\u7ebf\u7a0b\u4e2d\u5de5\u4f5c\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u627f\u8bfa")," \u662f\u975e\u5e38\u8f7b\u7684 ",(0,r.kt)("a",{parentName:"li",href:"#optimization-features"})),(0,r.kt)("li",{parentName:"ul"},"\u6ca1\u6709\u591a\u7ebf\u7a0b\u7684\u5f00\u9500"),(0,r.kt)("li",{parentName:"ul"},"\u6bcf\u79d2\u53ef\u5904\u7406\u6570\u767e\u4e07\u6b21\u547c\u53eb"),(0,r.kt)("li",{parentName:"ul"},"\u7528\u4e8e\u7ec4\u5408\u591a\u4e2a\u627f\u8bfa\u7684\u5f3a\u5927\u7684API")),(0,r.kt)("h3",{id:"\u521b\u9020\u8bfa\u8a00"},"\u521b\u9020\u8bfa\u8a00"),(0,r.kt)("p",null,"\u6211\u4eec\u4e3b\u8981\u53ef\u4ee5\u7528\u57fa\u672c\u7684\u9759\u6001\u65b9\u6cd5\u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise"),"\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"of(T value)")," - \u521b\u5efa\u4e00\u4e2a\u6210\u529f\u5b8c\u6210\u7684\u627f\u8bfa\uff0c\u5982 ",(0,r.kt)("inlineCode",{parentName:"li"},"CompletableFuture.completedFuture()"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ofException(Exception e)")," - \u521b\u5efa\u4e00\u4e2a\u5f02\u5e38\u5b8c\u6210\u7684\u627f\u8bfa\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"complete()")," - \u521b\u5efa\u4e00\u4e2a\u6210\u529f\u5b8c\u6210\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Promise<Void>"),"\uff0c\u662f ",(0,r.kt)("inlineCode",{parentName:"li"},"Promise.of(null)"),"\u7684\u5feb\u6377\u65b9\u5f0f\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'Promise<Integer> firstNumber = Promise.of(10);\nPromise.of("Hello World");\nPromise.ofException(new Exception("Something went wrong") )\u3002\n')),(0,r.kt)("h3",{id:"\u94fe\u5f0f\u627f\u8bfa"},"\u94fe\u5f0f\u627f\u8bfa"),(0,r.kt)("p",null,"Promise\u5c06\u5728\u67d0\u4e2a\u672a\u6307\u5b9a\u7684\u65f6\u95f4\u6210\u529f\u6216\u5931\u8d25\uff0c\u4f60\u9700\u8981\u5c06\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\u6267\u884c\u7684\u65b9\u6cd5\u8fde\u9501\u8d77\u6765\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"then(FunctionEx<T, Promise<U>>)")," - \u8fd4\u56de\u4e00\u4e2a\u65b0\u7684Promise\uff0c\u8be5Promise\u662f\u901a\u8fc7\u5c06\u539fPromise\u7684\u7ed3\u679c\u6620\u5c04\u5230\u53e6\u4e00\u4e2aPromise\u800c\u5f97\u5230\u7684\u3002 \u5982\u679c\u539f\u6765\u7684\u627f\u8bfa\u88ab\u4f8b\u5916\u5730\u5b8c\u6210\u4e86\uff0c\u5c06\u4e0d\u5e94\u7528\u6620\u5c04\u529f\u80fd\u3002 \u7c7b\u4f3c\u4e8eJava\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"CompletionStage.thenCompose()"),"\u3002 \u7528\u4e8e\u5c06\u4e00\u4e2a\u627f\u8bfa\u7684\u7ed3\u679c\u6620\u5c04\u5230\u53e6\u4e00\u4e2a\u627f\u8bfa\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"then(SupplierEx<>)")," - \u8fd4\u56de\u4e00\u4e2a\u65b0\u7684Promise\uff0c\u8be5Promise\u662f\u901a\u8fc7\u8c03\u7528\u4e00\u4e2a\u63d0\u4f9b\u7684\u4f9b\u5e94\u5546\u7684\u65b0Promise\u83b7\u5f97\u7684\u3002 \u5982\u679c\u6700\u521d\u7684\u627f\u8bfa\u88ab\u4f8b\u5916\u5730\u5b8c\u6210\uff0c\u5c31\u4e0d\u4f1a\u6709\u4f9b\u5e94\u5546\u88ab\u8c03\u7528\u3002 \u5982\u679c\u4f60\u53ef\u4ee5\u5ffd\u7565\u539f\u59cb\u627f\u8bfa\u7684\u7ed3\u679c\uff0c\u8bf7\u4f7f\u7528\u8fd9\u4e9b\u65b9\u6cd5\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"map(FunctionEx<T, U>)")," - \u8fd4\u56de\u4e00\u4e2a\u65b0\u7684Promise\uff0c\u8be5Promise\u662f\u901a\u8fc7\u5c06\u539f\u59cbpromise\u7684\u7ed3\u679c\u6620\u5c04\u5230\u4e00\u4e9b\u5176\u4ed6\u7684\u503c\u800c\u5f97\u5230\u3002 \u5982\u679c\u539f\u6765\u7684\u627f\u8bfa\u88ab\u4f8b\u5916\u5730\u5b8c\u6210\u4e86\uff0c\u5c06\u4e0d\u5e94\u7528\u6620\u5c04\u529f\u80fd\u3002 \u7c7b\u4f3c\u4e8eJava\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"CompletionStage.thenApply()"),"\u3002 \u7528\u4e8e\u5c06\u4e00\u4e2a\u627f\u8bfa\u7684\u7ed3\u679c\u6620\u5c04\u5230\u5176\u4ed6\u7684\u503c\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"whenResult(ConsumerEx<T>)")," - \u8ba2\u9605\u7ed9\u5b9a\u7684\u6d88\u8d39\u8005\uff0c\u5728\u539f\u59cbPromise\u6210\u529f\u5b8c\u6210\u540e\u6267\u884c\u3002 \u7c7b\u4f3c\u4e8eJava\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"CompletionStage.thenAccept()"),"\u3002")),(0,r.kt)("p",null,"\u6b64\u5916\uff0c\u4e3a\u4e86\u5904\u7406\u9519\u8bef\uff0c\u8fd8\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u65b9\u6cd5\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\nthen(BiFunctionEx  ) - \u8fd4\u56de\u4e00\u4e2a\u65b0\u7684Promise\uff0c\u8be5Promise\u662f\u901a\u8fc7\u5c06\u539f\u59cb\u627f\u8bfa\u7684\u4e00\u4e2a\u7ed3\u679c\u548c\u4e00\u4e2a\u5f02\u5e38\u6620\u5c04\u5230\u5176\u4ed6\u627f\u8bfa\u800c\u5f97\u5230\u7684\u3002<T, Exception, Promise<U>>")," \u5982\u679c\u6700\u521d\u7684\u627f\u8bfa\u88ab\u4f8b\u5916\u5730\u5b8c\u6210\uff0c\u4f20\u9012\u7ed9\u6620\u5c04bi\u51fd\u6570\u7684\u5f02\u5e38\u88ab\u4fdd\u8bc1\u4e3a\u975e\u7a7a\u3002 \u63a5\u53d72\u4e2a\u53c2\u6570\uff1a\u4e00\u4e2a\u539f\u59cb\u627f\u8bfa\u7684\u7ed3\u679c\u548c\u4e00\u4e2a\u4ee3\u8868\u5931\u8d25\u627f\u8bfa\u7684\u5f02\u5e38\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"map(BiFunctionEx<T, Exception, U>)")," - \u8fd4\u56de\u4e00\u4e2a\u65b0\u7684Promise\uff0c\u8be5Promise\u662f\u901a\u8fc7\u5c06\u539f\u59cbpromise\u7684\u4e00\u4e2a\u7ed3\u679c\u548c\u4e00\u4e2a\u5f02\u5e38\u6620\u5c04\u5230\u5176\u4ed6\u503c\u800c\u5f97\u5230\u7684 \u3002 \u5982\u679c\u8fd9\u4e2a\u627f\u8bfa\u4f8b\u5916\u5730\u5b8c\u6210\u4e86\uff0c\u90a3\u4e48\u4f20\u9012\u7ed9\u6620\u5c04bi\u51fd\u6570\u7684\u5f02\u5e38\u5c31\u4f1a\u88ab\u4fdd\u8bc1\u4e3a\u975e\u7a7a\u3002 \u63a5\u53d72\u4e2a\u53c2\u6570\uff1a\u4e00\u4e2a\u539f\u59cb\u627f\u8bfa\u7684\u7ed3\u679c\u548c\u4e00\u4e2a\u4ee3\u8868\u5931\u8d25\u627f\u8bfa\u7684\u5f02\u5e38\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"whenException(ConsumerEx<Exception>)")," - \u8ba2\u9605\u7ed9\u5b9a\u6d88\u8d39\u8005\u7684expetion\uff0c\u5728\u539f\u59cbPromise\u5b8c\u6210\u540e\u4f8b\u5916\u5730\u6267\u884c\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"whenException(RunnableEx)")," - \u8ba2\u9605\u7ed9\u5b9a\u7684Runnable\uff0c\u5728\u539f\u59cbPromise\u5b8c\u6210\u540e\u4f8b\u5916\u5730\u6267\u884c\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"whenComplete(BiConsumerEx<T, Exception>)")," - \u8ba2\u9605\u7ed9\u5b9a\u7684\u751f\u7269\u6d88\u8d39\u8005\uff0c\u4ee5\u4fbf\u5728\u539f\u59cbPromise\u5b8c\u6210\u540e\u6267\u884c \uff08\u65e0\u8bba\u662f\u6210\u529f\u8fd8\u662f\u4f8b\u5916\uff09\u3002 \u63a5\u53d72\u4e2a\u53c2\u6570\uff1a\u4e00\u4e2a\u539f\u59cb\u627f\u8bfa\u7684\u7ed3\u679c\u548c\u4e00\u4e2a\u4ee3\u8868\u5931\u8d25\u627f\u8bfa\u7684\u5f02\u5e38\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"whenComplete(RunnableEx)")," - \u8ba2\u9605\u7ed9\u5b9a\u7684runnable\uff0c\u4ee5\u4fbf\u5728\u539f\u59cb\u7684Promise\u5b8c\u6210\u540e\u6267\u884c \uff08\u65e0\u8bba\u662f\u6210\u529f\u8fd8\u662f\u4f8b\u5916\uff09\u3002")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"\u6bcf\u4e2a\u627f\u8bfa\u94fe\u65b9\u6cd5\u90fd\u9700\u8981\u4e00\u4e2a'Ex'\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u3002 \u8fd9\u4e9b\u662f\u529f\u80fd\u63a5\u53e3\uff0c\u7c7b\u4f3c\u4e8e ",(0,r.kt)("inlineCode",{parentName:"p"},"java.util.function")," \u5305\u4e2d\u7684\u5bf9\u5e94\u63a5\u53e3\u3002 \u4e3b\u8981\u533a\u522b\u5728\u4e8e\uff0c\u6bcf\u4e2a'Ex'\u51fd\u6570\u90fd\u53ef\u80fd\u629b\u51fa\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Exception"),"\u3002"),(0,r.kt)("p",{parentName:"div"},"\u5982\u679c\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Ex")," \u51fd\u6570\u629b\u51fa\u4e00\u4e2a\u88ab\u68c0\u67e5\u7684\u5f02\u5e38\uff0c\u90a3\u4e48\u4ea7\u751f\u7684\u627f\u8bfa\u4e5f\u4f1a\u88ab\u4f8b\u5916\u5730\u5b8c\u6210\u3002 \u5982\u679c\u4e00\u4e2a\u672a\u68c0\u67e5\u7684\u5f02\u5e38\u88ab\u629b\u51fa \uff0c\u800c\u4e0d\u662f\u88ab\u629b\u51fa\uff0c\u4e00\u4e2a\u627f\u8bfa\u5c06\u4e0d\u4f1a\u88ab\u5b8c\u6210\uff0c\u672a\u68c0\u67e5\u7684\u5f02\u5e38\u5c06\u88ab\u91cd\u65b0\u629b\u51fa\u3002"))),(0,r.kt)("p",null,"\u5982\u679c\u6709\u591a\u4e2a\u5f02\u6b65\u8c03\u7528\uff0c\u6211\u4eec\u9700\u8981\u6309\u987a\u5e8f\u6267\u884c\u5b83\u4eec\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5\u7b80\u5355\u5730\u5c06\u65b9\u6cd5\u94fe \uff0c\u4ee5\u521b\u5efa\u4e00\u4e2a\u5e8f\u5217\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:"url=/examples/core/promise/src/main/java/PromiseChainExample.java tag=REGION_1",url:"/examples/core/promise/src/main/java/PromiseChainExample.java",tag:"REGION_1"},"doSomeProcess()\n    .whenResult(result -> System.out.printf(\"Result of some process is '%s'%n\", result))\n    .whenException(e -> System.out.printf(\"Exception after some process is '%s'%n\", e.getMessage()))\n    .map(s -> s.toLowerCase())\n    .map(result -> String.format(\"The mapped result is '%s'\", result), e -> e.getMessage())\n    .whenResult(s -> System.out.println(s));\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)(o.Z,{url:"/examples/core/promise/src/main/java/PromiseChainExample.java",mdxType:"Githublink"},"\u5728GitHub\u4e0a\u770b\u5230\u5b8c\u6574\u7684\u4f8b\u5b50"))),(0,r.kt)("h3",{id:"\u5408\u5e76\u627f\u8bfa"},"\u5408\u5e76\u627f\u8bfa"),(0,r.kt)("p",null,"\u6709\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4f60\u9700\u8981\u6267\u884c\u51e0\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise"),"\uff0c\u5e76\u5c06\u5176\u7ed3\u679c\u7ed3\u5408\u8d77\u6765\u3002 \u4e3a\u6b64\uff0c \uff0c\u8003\u8651\u5230\u4ee5\u4e0b\u9759\u6001\u65b9\u6cd5\uff0c\u4ece ",(0,r.kt)(o.Z,{url:"/core-promise/src/main/java/io/activej/promise/Promises.java",mdxType:"Githublink"},"\u627f\u8bfa")," \u7c7b\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"combine()")," - \u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Promise")," \uff0c\u5f53\u4e24\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"Promise"),"s\u90fd\u5b8c\u6210\u540e\uff0c\u4ee5\u4e24\u4e2a\u7ed3\u679c\u4e3a\u53c2\u6570\u6267\u884c\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"all()")," - \u8fd4\u56de\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"Promise")," \uff0c\u5f53\u6240\u6709\u63d0\u4f9b\u7684\u627f\u8bfa\u90fd\u5b8c\u6210\u65f6\uff0c\u5c31\u5b8c\u6210\u4e86\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"any()")," - \u8fd4\u56de\u7b2c\u4e00\u4e2a\u5b8c\u6210\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"\u8bfa\u8a00\u4e4b\u4e00"),"\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:"url=/examples/core/promise/src/main/java/PromiseAdvancedExample.java tag=REGION_1",url:"/examples/core/promise/src/main/java/PromiseAdvancedExample.java",tag:"REGION_1"},'Promise<Integer> firstNumber = Promise.of(10);\nPromise<Integer> secondNumber = Promises.delay(2000, 100);\n\nPromise<Integer> result = firstNumber.combine(secondNumber, Integer::sum);\nresult.whenResult(res -> System.out.println("The first result is " + res));\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"delay()")," - \u5ef6\u8fdf\u5b8c\u6210\u6240\u63d0\u4f9b\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Promise")," \uff0c\u5e76\u5b9a\u4e49\u4e00\u4e2a\u65f6\u95f4\u6bb5\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'Promise<String> strPromise = Promises.delay("result", Duration.seconds(10))\n')),(0,r.kt)("h2",{id:"\u4f18\u5316\u529f\u80fd"},"\u4f18\u5316\u529f\u80fd"),(0,r.kt)("p",null,"ActiveJ ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise")," \u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u8fdb\u884c\u4e86GC\u4f18\u5316\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u5178\u578b\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Promise")," \u7684\u5185\u90e8\u8868\u793a\u75311-2\u4e2a\u5bf9\u8c61\u7ec4\u6210\uff0c \u91cc\u9762\u7684\u5b57\u6bb5\u6700\u5c11\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5728 ",(0,r.kt)("inlineCode",{parentName:"li"},"Promise")," \uff0c\u5b83\u5c06\u7ed3\u679c\u4f20\u9012\u7ed9\u5b83\u7684\u8ba2\u9605\u8005\uff0c\u7136\u540e\u4e22\u5f03\u7ed3\u679c\u3002")),(0,r.kt)("p",null,"\u4e3a\u4e86\u4f18\u5316 ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise"),"s\uff0c\u6709\u51e0\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise")," \u63a5\u53e3\u7684\u5b9e\u73b0\u3002"),(0,r.kt)(l.Z,{chart:"\ngraph TD\nPromise --\x3e AbstractPromise\nPromise --\x3e CompleteExceptionallyPromise\nPromise --\x3e CompletePromise\nAbstractPromise --\x3e NextPromise\nAbstractPromise --\x3e SetablePromise\nCompletePromise --\x3e CompleteResultPromise\nCompletePromise --\x3e CompleteNullPromise\n",mdxType:"Mermaid"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Promise")," - \u6839\u63a5\u53e3\uff0c\u8868\u793a ",(0,r.kt)("em",{parentName:"li"},"\u627f\u8bfa")," \u884c\u4e3a\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"SettablePromise")," - \u53ef\u4f5c\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"Promise"),"s\u94fe\u7684\u6839\u3002 \u5141\u8bb8\u5728 ",(0,r.kt)("inlineCode",{parentName:"li"},"Promise"),"s\u4e2d\u5305\u88f9\u64cd\u4f5c\uff0c \uff0c\u751a\u81f3\u53ef\u4ee5\u5728\u5b9e\u9645\u5b8c\u6210\u4e4b\u524d\u624b\u52a8\u5b8c\u6210\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"AbstractPromise"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"NextPromise")," - \u5e2e\u52a9\u7c7b\uff0c\u7528\u4e8e\u521b\u5efa\u65e0\u72b6\u6001 ",(0,r.kt)("em",{parentName:"li"},"Promises"),"\u7684\u94fe\u3002 \u4f60\u53ef\u4ee5\u628a \uff0c\u8fd9\u4e9b\u94fe\u5c31\u50cf\u7ba1\u9053\u4e00\u6837\uff0c\u628a\u503c\u4f20\u8fc7\u53bb\uff0c\u4f46\u4e0d\u5b58\u50a8\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"CompletePromise")," - \u4e00\u4e2a\u62bd\u8c61\u7684\u7c7b\uff0c\u8868\u793a\u4e00\u4e2a\u6210\u529f\u5b8c\u6210\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Promise"),"\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"CompleteExceptionallyPromise"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"CompleteResultPromise"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"CompleteNullPromise")," - \u5e2e\u52a9\u7c7b\u3002")),(0,r.kt)("h2",{id:"\u57fa\u51c6"},"\u57fa\u51c6"),(0,r.kt)("p",null,"\u6211\u4eec\u5c06 ",(0,r.kt)("strong",{parentName:"p"},"ActiveJ Promise")," \u4e0e ",(0,r.kt)("strong",{parentName:"p"},"Java CompletableFuture")," \u5728\u4e0d\u540c\u7684\u573a\u666f\u4e2d\u8fdb\u884c\u4e86\u6bd4\u8f83\u3002"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"ActiveJ Promise"),"/",(0,r.kt)("strong",{parentName:"li"},"Java CompletableFuture")," \u7528\u4e00\u4e2a\u627f\u8bfa/\u672a\u6765\u6267\u884c\u64cd\u4f5c\u3002"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"ActiveJ Promise"),"/",(0,r.kt)("strong",{parentName:"li"},"Java CompletableFuture")," \u7ed3\u5408\u4e86\u51e0\u4e2a\u627f\u8bfa/\u671f\u8d27\u3002")),(0,r.kt)("p",null,"\u6211\u4eec\u4f7f\u7528JMH\u4f5c\u4e3a\u57fa\u51c6\u5de5\u5177\uff0c\u5728 ",(0,r.kt)("em",{parentName:"p"},"AverageTime")," \u6a21\u5f0f\u4e0b\u8fdb\u884c\u57fa\u51c6\u6d4b\u8bd5\u3002 \u6240\u6709\u7684\u6d4b\u91cf\u90fd\u662f\u4ee5\u7eb3\u79d2\u4e3a\u5355\u4f4d\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"ActiveJ Promise oneCallMeasure\nCnt: 10; Score: 12.952; Error: \xb1 0.693; Units: ns/op;\n\nActiveJ Promise combineMeasure\nCnt: 10; Score: 34.112; Error: \xb1 1.869; \u5355\u4f4d: ns/op;\n\nJava CompletableFuture oneCallMeasure\nCnt: 10; Score: 85.151; Error: \xb1 1.781; \u5355\u4f4d: ns/op;\n\nJava CompletableFuture combineMeasure\nCnt: 10; Score: 153.645; Error: \xb1 4.491; \u5355\u4f4d: ns/op;\n")),(0,r.kt)("p",null,"\u4f60\u53ef\u4ee5\u5728\u4ee5\u4e0b\u7f51\u7ad9\u627e\u5230\u57fa\u51c6\u6765\u6e90 ",(0,r.kt)(o.Z,{url:"/benchmarks/promise/src/main/java/io/activej/promise",mdxType:"Githublink"},(0,r.kt)("strong",{parentName:"p"},"GitHub"))),(0,r.kt)("h2",{id:"\u5b9e\u4f8b"},"\u5b9e\u4f8b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#promisechainexample"},"\u627f\u8bfa\u94fe\u5b9e\u4f8b")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#promiseadvancedexample"},"\u8bfa\u8a00\u9ad8\u7ea7\u793a\u4f8b")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#promisesexamples"},"\u627f\u8bfa\u5b9e\u4f8b")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#asyncfileserviceexample"},"\u5f02\u6b65\u6587\u4ef6\u5b9e\u4f8b"))),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"\u8981\u8fd0\u884c\u4f8b\u5b50\uff0c\u4f60\u9700\u8981\u4eceGitHub\u514b\u9686ActiveJ"),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/activej/activej\n")),(0,r.kt)("p",{parentName:"div"},"\u5e76\u5c06\u5176\u4f5c\u4e3a\u4e00\u4e2aMaven\u9879\u76ee\u5bfc\u5165\u3002 \u67e5\u770b\u6807\u7b7e ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)(s.Z,{name:"currentVersion",mdxType:"Variable"})),"\u3002 \u5728\u8fd0\u884c\u8fd9\u4e9b\u4f8b\u5b50\u4e4b\u524d\uff0c\u5148\u5efa\u7acb\u9879\u76ee\u3002 \u8fd9\u4e9b\u4f8b\u5b50\u4f4d\u4e8e ",(0,r.kt)("inlineCode",{parentName:"p"},"activej/examples/core/promise\u3002")))),(0,r.kt)("h3",{id:"\u627f\u8bfa\u94fe\u793a\u4f8b"},"\u627f\u8bfa\u94fe\u793a\u4f8b"),(0,r.kt)("p",null,"\u4f60\u53ef\u4ee5\u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise"),"\u7684\u94fe\uff0c\u751a\u81f3\u5728\u5b83\u4eec\u5b8c\u6210\u4e4b\u524d\uff0c\u4f60\u8fd8\u4e0d\u77e5\u9053\u5b83\u4eec\u662f\u6210\u529f\u5b8c\u6210 \u8fd8\u662f\u51fa\u73b0\u5f02\u5e38\u3002 \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u6709\u4e00\u4e2a ",(0,r.kt)("em",{parentName:"p"},"doSomeProcess")," \uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise")," \uff0c\u6709\u76f8\u7b49\u7684 \u673a\u4f1a\u6210\u529f\u5b8c\u6210\u6216\u51fa\u73b0\u5f02\u5e38\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u94fe\uff0c\u5b83\u5c06\u5904\u7406\u8fd9\u4e24\u79cd\u60c5\u51b5\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:"url=/examples/core/promise/src/main/java/PromiseChainExample.java tag=EXAMPLE",url:"/examples/core/promise/src/main/java/PromiseChainExample.java",tag:"EXAMPLE"},'@SuppressWarnings("Convert2MethodRef")\npublic class PromiseChainExample {\n  private static final Eventloop eventloop = Eventloop.create().withCurrentThread();\n\n  public static void main(String[] args) {\n    //[START REGION_1]\n    doSomeProcess()\n        .whenResult(result -> System.out.printf("Result of some process is \'%s\'%n", result))\n        .whenException(e -> System.out.printf("Exception after some process is \'%s\'%n", e.getMessage()))\n        .map(s -> s.toLowerCase())\n        .map(result -> String.format("The mapped result is \'%s\'", result), e -> e.getMessage())\n        .whenResult(s -> System.out.println(s));\n    //[END REGION_1]\n    Promise.complete()\n        .then(PromiseChainExample::loadData)\n        .whenResult(result -> System.out.printf("Loaded data is \'%s\'%n", result));\n    eventloop.run();\n  }\n\n  private static Promise<String> loadData() {\n    return Promise.of("Hello World");\n  }\n\n  public static Promise<String> doSomeProcess() {\n    return Promises.delay(1000, Math.random() > 0.5 ?\n        Promise.of("Hello World") :\n        Promise.ofException(new RuntimeException("Something went wrong")));\n  }\n}\n')),(0,r.kt)("p",null,"\u5982\u679c\u4f60\u8fd0\u884c\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u4f60\u4f1a\u6536\u5230\u8fd9\u6837\u7684\u8f93\u51fa\uff08\u5982\u679c ",(0,r.kt)("em",{parentName:"p"},"doSomeProcess")," \u6210\u529f\u5b8c\u6210\uff09\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u52a0\u8f7d\u7684\u6570\u636e\u662f'Hello World'\n\u67d0\u4e2a\u8fdb\u7a0b\u7684\u7ed3\u679c\u662f'Hello World'\n\u6620\u5c04\u7684\u7ed3\u679c\u662f'Hello World' \u3002\n")),(0,r.kt)("p",null,"\u6216\u8005\u8fd9\u6837\uff0c\u5982\u679c\u5b83\u4ee5\u5f02\u5e38\u7ed3\u675f\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u52a0\u8f7d\u7684\u6570\u636e\u662f'Hello World'\n\u67d0\u4e2a\u8fc7\u7a0b\u540e\u51fa\u73b0\u7684\u5f02\u5e38\u662f'\u51fa\u9519\u4e86'\n\u51fa\u9519\u4e86\n")),(0,r.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u7b2c\u4e00\u884c\u662f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},'\u8f7d\u5165\u7684\u6570\u636e\u662f "Hello World"\u3002\n')),(0,r.kt)("p",null,"\u8fd9\u662f\u7531\u4e8e\u6211\u4eec\u5728 ",(0,r.kt)("em",{parentName:"p"},"doSomeProcess"),"\u4e2d\u8bbe\u7f6e\u4e861\u79d2\u7684\u5ef6\u8fdf\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)(o.Z,{url:"/examples/core/promise/src/main/java/PromiseChainExample.java",mdxType:"Githublink"},"\u5728GitHub\u4e0a\u770b\u5230\u5b8c\u6574\u7684\u4f8b\u5b50"))),(0,r.kt)("h3",{id:"\u627f\u8bfa\u9ad8\u7ea7\u793a\u4f8b"},"\u627f\u8bfa\u9ad8\u7ea7\u793a\u4f8b"),(0,r.kt)("p",null,"\u4f60\u53ef\u4ee5\u5c06\u51e0\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise"),"s\uff0c\u4f8b\u5982\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:"url=/examples/core/promise/src/main/java/PromiseAdvancedExample.java tag=REGION_1",url:"/examples/core/promise/src/main/java/PromiseAdvancedExample.java",tag:"REGION_1"},'Promise<Integer> firstNumber = Promise.of(10);\nPromise<Integer> secondNumber = Promises.delay(2000, 100);\n\nPromise<Integer> result = firstNumber.combine(secondNumber, Integer::sum);\nresult.whenResult(res -> System.out.println("The first result is " + res));\n')),(0,r.kt)("p",null,"\u4e5f\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5ef6\u8fdf ",(0,r.kt)("inlineCode",{parentName:"p"},"\u627f\u8bfa"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:"url=/examples/core/promise/src/main/java/PromiseAdvancedExample.java tag=REGION_2",url:"/examples/core/promise/src/main/java/PromiseAdvancedExample.java",tag:"REGION_2"},'int someValue = 1000;\nint delay = 1000;     // in milliseconds\nint interval = 2000;  // also in milliseconds\nPromise<Integer> intervalPromise = Promises.interval(interval, Promise.of(someValue));\nPromise<Integer> schedulePromise = Promises.schedule(someValue * 2, Instant.now());\nPromise<Integer> delayPromise = Promises.delay(delay, someValue);\n\nPromise<Integer> result = intervalPromise\n    .combine(schedulePromise, (first, second) -> first - second)\n    .combine(delayPromise, Integer::sum);\n\nresult.whenResult(res -> System.out.println("The second result is " + res));\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)(o.Z,{url:"/examples/core/promise/src/main/java/PromiseAdvancedExample.java",mdxType:"Githublink"},"\u5728GitHub\u4e0a\u770b\u5230\u5b8c\u6574\u7684\u4f8b\u5b50"))),(0,r.kt)("h3",{id:"\u627f\u8bfa\u5b9e\u4f8b"},"\u627f\u8bfa\u5b9e\u4f8b"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"#"},(0,r.kt)(o.Z,{url:"/core-promise/src/main/java/io/activej/promise/Promises.java",mdxType:"Githublink"},(0,r.kt)("inlineCode",{parentName:"a"},"Promises")))," \u662f\u4e00\u4e2a\u8f85\u52a9\u7c7b\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u7ba1\u7406\u591a\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise"),"\u3002 \u8fd9\u4e2a\u4f8b\u5b50\u5c06\u5c55\u793a\u4e09\u4e2a\u7528\u4f8b\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 ",(0,r.kt)("inlineCode",{parentName:"li"},"Promises")," ",(0,r.kt)("inlineCode",{parentName:"li"},"loop"),"\uff0c\u5b83\u7c7b\u4f3c\u4e8eJava ",(0,r.kt)("inlineCode",{parentName:"li"},"for")," loop\uff0c\u4f46\u5177\u6709\u5f02\u6b65\u529f\u80fd\uff0c \uff0c\u5b83\u7531 ",(0,r.kt)("inlineCode",{parentName:"li"},"Promise"),"\u63d0\u4f9b\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:"url=/examples/core/promise/src/main/java/PromisesExample.java tag=REGION_2",url:"/examples/core/promise/src/main/java/PromisesExample.java",tag:"REGION_2"},'Promises.loop(0,\n    i -> i < 5,\n    i -> {\n      System.out.println("This is iteration #" + i);\n      return Promise.of(i + 1);\n    });\n')),(0,r.kt)("p",null,"\u8f93\u51fa\u662f\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u5e26\u6761\u4ef6\u7684\u5faa\u73af\uff1a\n\u8fd9\u662f\u8fed\u4ee3#1\n\u8fd9\u662f\u8fed\u4ee3#2\n\u8fd9\u662f\u8fed\u4ee3#3\n\u8fd9\u662f\u8fed\u4ee3#4\n\u8fd9\u662f\u8fed\u4ee3#5\n")),(0,r.kt)("p",null,"2.\u53e6\u4e00\u4e2a\u4f8b\u5b50\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"Promises")," ",(0,r.kt)("inlineCode",{parentName:"p"},"toList")," \u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise"),"s\u7ed3\u679c\u7684\u5217\u8868\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:"url=/examples/core/promise/src/main/java/PromisesExample.java tag=REGION_3",url:"/examples/core/promise/src/main/java/PromisesExample.java",tag:"REGION_3"},'Promises.toList(Promise.of(1), Promise.of(2), Promise.of(3), Promise.of(4), Promise.of(5), Promise.of(6))\n    .whenResult(list -> System.out.println("Size of collected list: " + list.size() + "\\nList: " + list));\n')),(0,r.kt)("p",null,"\u8f93\u51fa\u662f\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u5c06**\u627f\u8bfa**\u7ec4\u6536\u96c6\u5230**\u627f\u8bfa**\u7684\u5217\u8868\u4e2d\uff0c\u7ed3\u679c\uff1a\n\u6536\u96c6\u7684\u5217\u8868\u5927\u5c0f\u30026\n\u5217\u8868\u3002[1, 2, 3, 4, 5, 6]\n")),(0,r.kt)("p",null,"3.\u5728\u6700\u540e\u4e00\u4e2a\u4f8b\u5b50\u4e2d ",(0,r.kt)("strong",{parentName:"p"},"Promises")," ",(0,r.kt)("em",{parentName:"p"},"toArray")," \u65b9\u6cd5\u88ab\u5229\u7528\uff0c\u5b83\u5c06 ",(0,r.kt)("em",{parentName:"p"},"promises")," \u51cf\u5c11\u4e3a\u6240\u63d0\u4f9b\u7684\u6570\u636e\u7c7b\u578b\u7684\u6570\u7ec4\uff08\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c ",(0,r.kt)("em",{parentName:"p"},"Integers"),"\uff09\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:"url=/examples/core/promise/src/main/java/PromisesExample.java tag=REGION_4",url:"/examples/core/promise/src/main/java/PromisesExample.java",tag:"REGION_4"},'Promises.toArray(Integer.class, Promise.of(1), Promise.of(2), Promise.of(3), Promise.of(4), Promise.of(5), Promise.of(6))\n    .whenResult(array -> System.out.println("Size of collected array: " + array.length + "\\nArray: " + Arrays.toString(array)));\n')),(0,r.kt)("p",null,"\u800c\u6700\u7ec8\u7684\u8f93\u51fa\u662f\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u5c06**\u627f\u8bfa**\u7ec4\u6536\u96c6\u5230**\u627f\u8bfa**\u7684\u6570\u7ec4\u4e2d\uff0c\u7ed3\u679c\uff1a\n\u6536\u96c6\u7684\u6570\u7ec4\u5927\u5c0f\u30026\n\u9635\u5217\u3002[1, 2, 3, 4, 5, 6]\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)(o.Z,{url:"/examples/core/promise/src/main/java/PromisesExample.java",mdxType:"Githublink"},"\u5728GitHub\u4e0a\u770b\u5230\u5b8c\u6574\u7684\u4f8b\u5b50"))),(0,r.kt)("h3",{id:"\u5f02\u6b65\u6587\u4ef6\u670d\u52a1\u793a\u4f8b"},"\u5f02\u6b65\u6587\u4ef6\u670d\u52a1\u793a\u4f8b"),(0,r.kt)("p",null,"\u53e6\u5916\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"Promises")," \uff0c\u4e0e\u6587\u4ef6\u7cfb\u7edf\u4e00\u8d77\u5de5\u4f5c\u3002 \u5f53\u4f60\u8fd0\u884c\u8fd9\u4e2a\u4f8b\u5b50\u65f6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:"url=/examples/core/promise/src/main/java/AsyncFileServiceExample.java tag=REGION_1",url:"/examples/core/promise/src/main/java/AsyncFileServiceExample.java",tag:"REGION_1"},'private static @NotNull Promise<Void> writeToFile() {\n  try {\n    FileChannel channel = FileChannel.open(PATH, setOf(WRITE, APPEND));\n\n    byte[] message1 = "Hello\\n".getBytes();\n    byte[] message2 = "This is test file\\n".getBytes();\n    byte[] message3 = "This is the 3rd line in file".getBytes();\n\n    return fileService.write(channel, 0, message1, 0, message1.length)\n        .then(() -> fileService.write(channel, 0, message2, 0, message2.length))\n        .then(() -> fileService.write(channel, 0, message3, 0, message3.length))\n        .toVoid();\n  } catch (IOException e) {\n    return Promise.ofException(e);\n  }\n}\n\nprivate static @NotNull Promise<ByteBuf> readFromFile() {\n  byte[] array = new byte[1024];\n  FileChannel channel;\n  try {\n    channel = FileChannel.open(PATH, setOf(READ));\n  } catch (IOException e) {\n    return Promise.ofException(e);\n  }\n\n  return fileService.read(channel, 0, array, 0, array.length)\n      .map(bytesRead -> {\n        ByteBuf buf = ByteBuf.wrap(array, 0, bytesRead);\n        System.out.println(buf.getString(UTF_8));\n        return buf;\n      });\n}\n')),(0,r.kt)("p",null,"......\u4f60\u4f1a\u6536\u5230\u4ee5\u4e0b\u8f93\u51fa\uff0c\u5b83\u4ee3\u8868\u4e86\u6240\u521b\u5efa\u7684\u6587\u4ef6\u7684\u5185\u5bb9\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u4f60\u597d\n\u8fd9\u662f\u6d4b\u8bd5\u6587\u4ef6\n\u8fd9\u662f\u6587\u4ef6\u4e2d\u7684\u7b2c\u4e09\u884c\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)(o.Z,{url:"/examples/core/promise/src/main/java/AsyncFileServiceExample.java",mdxType:"Githublink"},"\u5728GitHub\u4e0a\u770b\u5230\u5b8c\u6574\u7684\u4f8b\u5b50"))))}N.isMDXComponent=!0},11748:function(e,a,n){var t={"./locale":89234,"./locale.js":89234};function i(e){var a=r(e);return n(a)}function r(e){if(!n.o(t,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t[e]}i.keys=function(){return Object.keys(t)},i.resolve=r,e.exports=i,i.id=11748}}]);